import { firestore } from "../modules/firebase";const docRef = firestore.collection("pets");const FETCH_PETS_BY_ORG = "fetchPetsByOrg";const fetchPetsByOrg = orgID => async dispatch => {  let temp = {};  try {    let query = docRef.where("orgID", "==", orgID).limit(10);    await query      .get()      .then(querySnapshot => {        querySnapshot.forEach(doc => {          temp[doc.id] = doc.data();        });      })      .catch(e => {        console.log("fetch pets by org err: ", e);      });  } catch (e) {    console.log(e);  }  dispatch({    type: FETCH_PETS_BY_ORG,    payload: temp,    orgID: orgID  });};const FETCH_NEARBY_PETS = "fetchNearbyPetsByOrg";const fetchNearbyPets = (orgID, searchParams) => async dispatch => {  let { species,sex } = searchParams;  let temp = {};  let query = docRef.where("orgID", "==", orgID); //.limit(10);  if (species) {    query = query.where("species", "==", species);  }  if(sex){    query = query.where("sex", "==", sex);  }    //query = query.where("sizeCurrent", ">=", 5);  try {    temp[orgID] = {};    await query      .get()      .then(querySnapshot => {        querySnapshot.forEach(doc => {          temp[orgID][doc.id] = doc.data();          //temp2[doc.id] = doc.data();        });      })      .catch(e => {        console.log("fetch pets by org err: ", e);      });  } catch (e) {    console.log(e);  }  //console.log('temp',temp)  dispatch({    type: FETCH_NEARBY_PETS,    payload: temp  });};const CLEAR_NEARBY_PETS = "clearNearbyPets";const clearNearbyPets = () => {  return {    type: CLEAR_NEARBY_PETS,    //payload: {}  };};/*const fetchNearbyPets = geoArray => async dispatch => {  if (!geoArray.length)    return {      type: FETCH_NEARBY_PETS,      payload: {}    };  let temp = {};  await geoArray.map(geo => {    let arr = [];    let query = docRef.where("orgID", "==", geo.key).limit(10);    query      .get()      .then(querySnapshot => {        //let arr = {}        querySnapshot.forEach(doc => {          if (doc.exists) {            console.log("doc found: ", geo.key, doc.data().name);            //temp[doc.data().name] = doc.data();            arr.push(doc.data());          } else {            console.log("no doc: ", geo.key);          }        });        return arr;      })      .then(res => console.log("res", res))      //.then(res => temp[geo.key]=res) //temp.push(doc.data()))      .catch(err => console.log("firestore err: ", err));  });  Object.keys(temp).map(id => console.log("id", id));  console.log("temp", temp);  dispatch({    type: FETCH_NEARBY_PETS,    payload: temp  });};*/export {  FETCH_PETS_BY_ORG,  fetchPetsByOrg,  FETCH_NEARBY_PETS,  fetchNearbyPets,  CLEAR_NEARBY_PETS,  clearNearbyPets};